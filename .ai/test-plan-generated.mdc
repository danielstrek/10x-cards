# Plan Test√≥w dla 10x-cards

## 1. Wprowadzenie i Cele Testowania

### 1.1 Cel dokumentu
Plan test√≥w definiuje strategiƒô i zakres testowania aplikacji 10x-cards - systemu do automatycznego generowania i zarzƒÖdzania fiszkami edukacyjnymi z wykorzystaniem AI.

### 1.2 Cele testowania
- Weryfikacja poprawno≈õci dzia≈Çania kluczowych funkcjonalno≈õci (generowanie fiszek AI, autentykacja, CRUD)
- Zapewnienie bezpiecze≈Ñstwa danych u≈ºytkownik√≥w zgodnie z RODO
- Walidacja integracji z us≈Çugami zewnƒôtrznymi (Supabase Auth, OpenRouter AI)
- Potwierdzenie wydajno≈õci i stabilno≈õci aplikacji
- Weryfikacja responsywno≈õci i dostƒôpno≈õci interfejsu

---

## 2. Zakres Test√≥w

### 2.1 W zakresie test√≥w

**Frontend:**
- Komponenty React (formularze auth, generowanie fiszek, lista fiszek)
- Strony Astro (SSR routing, middleware)
- Walidacja formularzy
- Responsywno≈õƒá UI (desktop, tablet, mobile)
- Dostƒôpno≈õƒá (WCAG 2.1 AA)

**Backend:**
- API endpoints (auth, generations, flashcards)
- Serwisy domenowe (flashcards.service, generations.service, openrouter.service)
- Walidacja danych (Zod schemas)
- Middleware autentykacji
- Obs≈Çuga b≈Çƒôd√≥w

**Baza danych:**
- Migracje PostgreSQL
- RLS policies (izolacja danych u≈ºytkownik√≥w)
- Triggery i constraints
- Integralno≈õƒá referencyjna

**Integracje:**
- Supabase Auth (rejestracja, logowanie, sesje)
- OpenRouter API (generowanie fiszek)
- Cookies i localStorage (hybrid auth storage)

### 2.2 Poza zakresem test√≥w
- Algorytm powt√≥rek (zewnƒôtrzna biblioteka open-source)
- Mobilne aplikacje natywne (MVP to web app)
- Import dokument√≥w (PDF, DOCX)
- Wsp√≥≈Çdzielenie fiszek miƒôdzy u≈ºytkownikami
- Zaawansowana gamifikacja

---

## 3. Typy Test√≥w

### 3.1 Testy Jednostkowe (Unit Tests)
**Cel:** Weryfikacja izolowanych jednostek kodu

**Zakres:**
- Serwisy: `flashcards.service.ts`, `generations.service.ts`, `openrouter.service.ts`
- Utility functions: walidacja, hashowanie, parsowanie
- Custom hooks: `useGenerateFlashcards`, `useSaveFlashcards`
- Komponenty UI: `Button`, `Input`, `Card`, `Dialog`

**Narzƒôdzia:** Vitest, React Testing Library

**Priorytetowe przypadki:**
- `OpenRouterService`: walidacja messages, response format, retry logic, error handling
- `createGeneration()`: hashowanie tekstu, walidacja d≈Çugo≈õci, obs≈Çuga b≈Çƒôd√≥w LLM
- `bulkCreateFlashcards()`: walidacja source, limity 1-100 fiszek
- Custom hooks: obs≈Çuga stan√≥w loading/error/success

### 3.2 Testy Integracyjne (Integration Tests)
**Cel:** Weryfikacja wsp√≥≈Çpracy miƒôdzy komponentami

**Zakres:**
- API endpoints z serwisami i bazƒÖ danych
- Frontend z backend API
- Middleware + endpoints + Supabase
- OpenRouter service + generations service

**Narzƒôdzia:** Vitest, Supertest/fetch, Testcontainers (Supabase local)

**Priorytetowe przypadki:**
- Flow: POST /api/generations ‚Üí OpenRouter ‚Üí createGeneration() ‚Üí DB insert
- Flow: POST /api/flashcards ‚Üí bulkCreateFlashcards() ‚Üí DB insert + generation update
- Middleware: weryfikacja tokenu ‚Üí locals.user ‚Üí endpoint protection
- Auth flow: register ‚Üí verify email ‚Üí login ‚Üí protected endpoint

### 3.3 Testy End-to-End (E2E)
**Cel:** Weryfikacja pe≈Çnych przep≈Çyw√≥w u≈ºytkownika

**Zakres:**
- User stories z PRD (US-001 do US-009)
- Krytyczne ≈õcie≈ºki biznesowe
- Cross-browser compatibility

**Narzƒôdzia:** Playwright

**Scenariusze:**
1. **Rejestracja i pierwsze logowanie**
   - Wype≈Çnienie formularza rejestracji
   - Potwierdzenie email (je≈õli w≈ÇƒÖczone)
   - Logowanie i redirect do /generate
   
2. **Generowanie fiszek AI**
   - Wklejenie tekstu (1000-10000 znak√≥w)
   - Klikniƒôcie "Generuj"
   - Wy≈õwietlenie propozycji (5-20 fiszek)
   - Edycja wybranych fiszek
   - Zapis zaakceptowanych

3. **ZarzƒÖdzanie fiszkami**
   - PrzeglƒÖdanie listy "Moje fiszki"
   - Edycja fiszki
   - Usuwanie fiszki
   - Rƒôczne tworzenie fiszki

4. **Wylogowanie i ponowne logowanie**
   - Wylogowanie (clear cookies + localStorage)
   - Redirect do /login
   - Ponowne logowanie
   - Weryfikacja persistencji danych

### 3.4 Testy API (Manual + Automated)
**Cel:** Weryfikacja kontrakt√≥w API zgodnie z DTOs

**Zakres:**
- Wszystkie endpointy w `/api/*`
- Request/response validation
- Kody HTTP
- Error responses

**Narzƒôdzia:** PowerShell scripts (existing), Postman/Thunder Client, Vitest

**Endpointy do przetestowania:**

#### Auth endpoints:
- `POST /api/auth/register`
  - ‚úÖ 201: Poprawna rejestracja
  - ‚ö†Ô∏è 400: S≈Çabe has≈Ço, nieprawid≈Çowy email
  - ‚ö†Ô∏è 409: Email ju≈º istnieje
  
- `POST /api/auth/login`
  - ‚úÖ 200: Poprawne logowanie + tokeny
  - ‚ö†Ô∏è 401: Nieprawid≈Çowe dane
  
- `POST /api/auth/logout`
  - ‚úÖ 204: Wylogowanie + clear cookies

#### Generations endpoint:
- `POST /api/generations`
  - ‚úÖ 201: Wygenerowane fiszki (5-20)
  - ‚ö†Ô∏è 400: Tekst poza zakresem 1000-10000 znak√≥w
  - ‚ö†Ô∏è 401: Brak tokenu
  - ‚ö†Ô∏è 429: Rate limit OpenRouter
  - ‚ö†Ô∏è 500: B≈ÇƒÖd LLM

#### Flashcards endpoint:
- `POST /api/flashcards`
  - ‚úÖ 201: Utworzono fiszki (1-100)
  - ‚ö†Ô∏è 400: Front > 200 chars, Back > 500 chars
  - ‚ö†Ô∏è 401: Brak autoryzacji
  - ‚ö†Ô∏è 404: NieistniejƒÖcy generation_id

### 3.5 Testy Bezpiecze≈Ñstwa (Security Tests)
**Cel:** Weryfikacja ochrony przed atakami i wyciekom danych

**Zakres:**
- Autentykacja i autoryzacja
- RLS policies w PostgreSQL
- Input validation (XSS, SQL injection)
- CORS configuration
- Cookie security (httpOnly, sameSite)

**Scenariusze:**
1. **Row Level Security (RLS)**
   - User A nie mo≈ºe odczytaƒá fiszek User B
   - User A nie mo≈ºe modyfikowaƒá generations User B
   - Pr√≥ba obej≈õcia RLS przez manipulacjƒô user_id w request

2. **JWT Token Security**
   - Pr√≥ba dostƒôpu z wygas≈Çym tokenem
   - Pr√≥ba modyfikacji tokenu (signature validation)
   - Pr√≥ba u≈ºycia tokenu innego u≈ºytkownika

3. **Input Validation**
   - XSS: `<script>alert('xss')</script>` w polach fiszek
   - SQL Injection: `'; DROP TABLE flashcards; --`
   - Oversized payloads (DoS): 10MB JSON body

4. **RODO Compliance**
   - Usuniƒôcie konta usuwa wszystkie dane (cascade delete)
   - Brak logowania wra≈ºliwych danych (has≈Ça, tokeny)

### 3.6 Testy Wydajno≈õciowe (Performance Tests)
**Cel:** Weryfikacja czas√≥w odpowiedzi i skalowalno≈õci

**Zakres:**
- Czasy odpowiedzi API
- Czas generowania fiszek przez LLM
- Rendering UI (Lighthouse, Core Web Vitals)
- Database query performance

**Narzƒôdzia:** Artillery, Lighthouse, PostgreSQL EXPLAIN

**Benchmarki:**
- API endpoints: < 200ms (bez OpenRouter)
- POST /api/generations: < 10s (z OpenRouter)
- Lighthouse Score: > 90 (Performance, Accessibility)
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3.5s

**Scenariusze obciƒÖ≈ºenia:**
- 10 r√≥wnoczesnych u≈ºytkownik√≥w generujƒÖcych fiszki
- 100 r√≥wnoczesnych request√≥w do /api/flashcards
- Bulk insert 100 fiszek jednocze≈õnie

### 3.7 Testy Dostƒôpno≈õci (Accessibility Tests)
**Cel:** WCAG 2.1 Level AA compliance

**Zakres:**
- Nawigacja klawiaturƒÖ (Tab, Enter, Escape)
- Screen reader compatibility
- Kontrast kolor√≥w (min 4.5:1)
- Opisy alternatywne (ARIA labels)
- Focus management

**Narzƒôdzia:** axe DevTools, Lighthouse, NVDA/JAWS

**Kluczowe obszary:**
- Formularze (login, register, generate)
- Przyciski i linki
- Komunikaty b≈Çƒôd√≥w (aria-live)
- Modalne dialogi (trap focus)

### 3.8 Testy Kompatybilno≈õci (Compatibility Tests)
**Cel:** Weryfikacja dzia≈Çania w r√≥≈ºnych ≈õrodowiskach

**PrzeglƒÖdarki:**
- Chrome 110+
- Firefox 110+
- Safari 16+
- Edge 110+

**UrzƒÖdzenia:**
- Desktop: 1920x1080, 1366x768
- Tablet: iPad (1024x768)
- Mobile: iPhone 14 (390x844), Android (360x800)

---

## 4. Scenariusze Testowe dla Kluczowych Funkcjonalno≈õci

### 4.1 Generowanie Fiszek AI (US-003)

**TC-GEN-001: Pomy≈õlne generowanie fiszek**
- **Warunki poczƒÖtkowe:** U≈ºytkownik zalogowany, na stronie /generate
- **Kroki:**
  1. Wklej tekst 5000 znak√≥w do textarea
  2. Kliknij "Generuj fiszki"
  3. Obserwuj skeleton loader
- **Oczekiwany rezultat:**
  - HTTP 201 Created
  - Lista 5-20 fiszek
  - Ka≈ºda fiszka: front (max 200 chars), back (max 500 chars)
  - Buttons: "Zapisz wszystkie", "Zapisz zaznaczone"
- **Priorytet:** Krytyczny

**TC-GEN-002: Walidacja d≈Çugo≈õci tekstu**
- **Kroki:**
  1. Wklej tekst 500 znak√≥w (za kr√≥tki)
  2. Kliknij "Generuj"
- **Oczekiwany rezultat:**
  - Komunikat b≈Çƒôdu: "Tekst musi mieƒá 1000-10000 znak√≥w"
  - HTTP 400 Bad Request
- **Priorytet:** Wysoki

**TC-GEN-003: Obs≈Çuga b≈Çƒôdu OpenRouter**
- **Warunki:** Nieprawid≈Çowy OPENROUTER_API_KEY
- **Kroki:**
  1. Wklej poprawny tekst
  2. Kliknij "Generuj"
- **Oczekiwany rezultat:**
  - HTTP 500 lub 401
  - Komunikat: "B≈ÇƒÖd serwisu AI"
  - B≈ÇƒÖd zalogowany w generation_error_logs
- **Priorytet:** Wysoki

**TC-GEN-004: Rate limit OpenRouter**
- **Warunki:** Przekroczony limit OpenRouter
- **Kroki:**
  1. Wywo≈Çaj POST /api/generations 10x w 1s
- **Oczekiwany rezultat:**
  - HTTP 429 Too Many Requests
  - Retry-After header
  - Komunikat: "Zbyt wiele zapyta≈Ñ. Spr√≥buj za X sekund."
- **Priorytet:** ≈öredni

### 4.2 Zapisywanie Fiszek (US-004)

**TC-SAVE-001: Zapis zaakceptowanych fiszek**
- **Warunki:** U≈ºytkownik ma 10 wygenerowanych propozycji
- **Kroki:**
  1. Zaznacz checkboxy 5 fiszek (3x ai-full, 2x ai-edited)
  2. Kliknij "Zapisz zaznaczone"
- **Oczekiwany rezultat:**
  - HTTP 201 Created
  - 5 fiszek w DB (user_id = current_user)
  - Generation updated: accepted_unedited_count=3, accepted_edited_count=2
  - Success dialog: "Zapisano 5 fiszek"
- **Priorytet:** Krytyczny

**TC-SAVE-002: Zapis wszystkich fiszek**
- **Kroki:**
  1. Kliknij "Zapisz wszystkie"
- **Oczekiwany rezultat:**
  - Wszystkie fiszki zapisane z source="ai-full"
  - Generation updated: accepted_unedited_count = generated_count
- **Priorytet:** Krytyczny

**TC-SAVE-003: Walidacja d≈Çugo≈õci fiszki**
- **Kroki:**
  1. Edytuj front fiszki na 250 znak√≥w
  2. Kliknij "Zapisz zaznaczone"
- **Oczekiwany rezultat:**
  - HTTP 400 Bad Request
  - Komunikat: "Front fiszki nie mo≈ºe przekraczaƒá 200 znak√≥w"
- **Priorytet:** Wysoki

**TC-SAVE-004: Bulk insert 100 fiszek**
- **Kroki:**
  1. Przygotuj payload z 100 fiszkami
  2. POST /api/flashcards
- **Oczekiwany rezultat:**
  - HTTP 201 Created
  - 100 rekord√≥w w DB
  - Czas odpowiedzi < 2s
- **Priorytet:** ≈öredni

### 4.3 Autentykacja (US-001, US-002)

**TC-AUTH-001: Rejestracja nowego u≈ºytkownika**
- **Kroki:**
  1. Otw√≥rz /auth/register
  2. Wprowad≈∫ email: test@example.com
  3. Wprowad≈∫ has≈Ço: SecurePass123!
  4. Kliknij "Zarejestruj siƒô"
- **Oczekiwany rezultat:**
  - HTTP 201 Created
  - User ID w odpowiedzi
  - Rekord w auth.users (Supabase)
  - Auto-login (je≈õli email confirmation wy≈ÇƒÖczona)
  - Redirect do /generate
- **Priorytet:** Krytyczny

**TC-AUTH-002: S≈Çabe has≈Ço**
- **Kroki:**
  1. Wprowad≈∫ has≈Ço: "123456"
  2. Kliknij "Zarejestruj siƒô"
- **Oczekiwany rezultat:**
  - HTTP 400 Bad Request
  - Komunikat: "Has≈Ço musi mieƒá min. 8 znak√≥w, 1 wielkƒÖ literƒô, 1 cyfrƒô, 1 znak specjalny"
- **Priorytet:** Wysoki

**TC-AUTH-003: Email ju≈º zarejestrowany**
- **Warunki:** test@example.com ju≈º istnieje
- **Kroki:**
  1. Pr√≥ba rejestracji z tym samym emailem
- **Oczekiwany rezultat:**
  - HTTP 409 Conflict
  - Komunikat: "Ten adres email jest ju≈º zarejestrowany"
- **Priorytet:** Wysoki

**TC-AUTH-004: Pomy≈õlne logowanie**
- **Kroki:**
  1. Otw√≥rz /auth/login
  2. Wprowad≈∫ poprawne dane
  3. Kliknij "Zaloguj siƒô"
- **Oczekiwany rezultat:**
  - HTTP 200 OK
  - accessToken, refreshToken w odpowiedzi
  - Cookies ustawione (sb-*)
  - localStorage.setItem('sb-access-token')
  - Redirect do /generate
- **Priorytet:** Krytyczny

**TC-AUTH-005: Nieprawid≈Çowe dane logowania**
- **Kroki:**
  1. Wprowad≈∫ niepoprawne has≈Ço
  2. Kliknij "Zaloguj siƒô"
- **Oczekiwany rezultat:**
  - HTTP 401 Unauthorized
  - Komunikat: "Nieprawid≈Çowy email lub has≈Ço"
  - Brak tokenu w odpowiedzi
- **Priorytet:** Wysoki

**TC-AUTH-006: Dostƒôp do chronionej strony bez logowania**
- **Kroki:**
  1. Clear cookies i localStorage
  2. Pr√≥ba otwarcia /generate
- **Oczekiwany rezultat:**
  - Redirect do /auth/login
  - Query param: ?redirect=/generate
- **Priorytet:** Krytyczny

**TC-AUTH-007: Wylogowanie**
- **Warunki:** U≈ºytkownik zalogowany
- **Kroki:**
  1. Kliknij UserNav ‚Üí "Wyloguj"
  2. POST /api/auth/logout
- **Oczekiwany rezultat:**
  - HTTP 204 No Content
  - Wszystkie cookies sb-* usuniƒôte
  - localStorage cleared
  - Redirect do /auth/login
- **Priorytet:** Krytyczny

### 4.4 Row Level Security (US-009)

**TC-RLS-001: Izolacja fiszek miƒôdzy u≈ºytkownikami**
- **Warunki:** User A (ID=123), User B (ID=456)
- **Kroki:**
  1. User A tworzy fiszki
  2. User B pr√≥buje GET /api/flashcards?userId=123
- **Oczekiwany rezultat:**
  - User B widzi tylko swoje fiszki (empty array)
  - RLS policy blokuje dostƒôp do fiszek User A
- **Priorytet:** Krytyczny

**TC-RLS-002: Pr√≥ba modyfikacji fiszki innego u≈ºytkownika**
- **Kroki:**
  1. User B pr√≥buje PATCH /api/flashcards/{flashcard_id_user_A}
- **Oczekiwany rezultat:**
  - HTTP 404 Not Found (lub 403 Forbidden)
  - Brak modyfikacji w DB
- **Priorytet:** Krytyczny

**TC-RLS-003: Kaskadowe usuniƒôcie danych (RODO)**
- **Kroki:**
  1. User A ma 50 fiszek i 10 generations
  2. DELETE /api/auth/account (User A)
- **Oczekiwany rezultat:**
  - auth.users: rekord usuniƒôty
  - flashcards: wszystkie rekordy User A usuniƒôte (ON DELETE CASCADE)
  - generations: wszystkie rekordy User A usuniƒôte
  - generation_error_logs: powiƒÖzane logi usuniƒôte
- **Priorytet:** Krytyczny (RODO compliance)

---

## 5. ≈örodowisko Testowe

### 5.1 ≈örodowisko lokalne (Development)
**Przeznaczenie:** Testy deweloperskie, unit tests, debugging

**Komponenty:**
- Node.js 22.14.0
- Docker Desktop (Supabase local)
- Supabase CLI (`npx supabase start`)
- PostgreSQL 15 (via Supabase)
- Local OpenRouter API (mock lub prawdziwy klucz z limitem)

**Setup:**
```bash
# 1. Start Supabase
npx supabase start

# 2. Configure .env
SUPABASE_URL=http://localhost:54321
SUPABASE_KEY=<anon_key>
OPENROUTER_API_KEY=<test_key>

# 3. Run migrations
npx supabase db reset

# 4. Start dev server
npm run dev
```

### 5.2 ≈örodowisko testowe (Testing/Staging)
**Przeznaczenie:** Integration tests, E2E tests, UAT

**Komponenty:**
- Supabase Cloud (projekt staging)
- OpenRouter API (ograniczony budget)
- DigitalOcean Droplet (staging deployment)
- CI/CD: GitHub Actions

**Konfiguracja:**
- Separate database z test fixtures
- Rate limiting wy≈ÇƒÖczony dla test√≥w
- Email confirmation wy≈ÇƒÖczona (auto-confirm)
- Logging level: DEBUG

### 5.3 ≈örodowisko produkcyjne (Production)
**Przeznaczenie:** Smoke tests, monitoring, sanity checks

**Komponenty:**
- Supabase Cloud (projekt production)
- OpenRouter API (pe≈Çny budget z limitami)
- DigitalOcean Droplet (production)
- Monitoring: Sentry, LogTail

**Ograniczenia test√≥w:**
- Tylko smoke tests na produkcji
- Brak test√≥w obciƒÖ≈ºenia
- Test user: test@10xcards.com (nie wolno usuwaƒá)

---

## 6. Narzƒôdzia do Testowania

### 6.1 Framework testowy
- **Vitest** - Unit i Integration tests
  - Fast (Vite-powered)
  - Compatible z Astro + React
  - Inline snapshots
  
- **React Testing Library** - Komponenty React
  - User-centric testing
  - Accessibility-first

### 6.2 E2E Testing
- **Playwright** - End-to-end tests
  - Cross-browser (Chromium, Firefox, WebKit)
  - Auto-wait, retry logic
  - Screenshot/video recording
  - Parallel execution

### 6.3 API Testing
- **PowerShell scripts** (istniejƒÖce w `.ai/tests/`)
  - Szybkie manualne testy
  - CI/CD friendly
  
- **Thunder Client / Postman** - Manual exploratory testing
  - Collections dla wszystkich endpoints
  - Environment variables (local, staging, prod)

### 6.4 Performance Testing
- **Lighthouse** - Web performance, accessibility
- **Artillery** - Load testing, stress testing
- **PostgreSQL EXPLAIN ANALYZE** - Query optimization

### 6.5 Security Testing
- **OWASP ZAP** - Vulnerability scanning
- **SQLMap** - SQL injection testing (on staging only)
- **axe DevTools** - Accessibility audit

### 6.6 Monitoring i Logging
- **Sentry** - Error tracking (production)
- **LogTail** - Structured logging
- **Supabase Dashboard** - Database monitoring

---

## 7. Harmonogram Test√≥w

### Faza 1: Setup i Przygotowanie (Tydzie≈Ñ 1)
- [ ] Konfiguracja Vitest + React Testing Library
- [ ] Konfiguracja Playwright (browsers, baseURL)
- [ ] Utworzenie test fixtures (seed data)
- [ ] Setup CI/CD pipeline (GitHub Actions)
- [ ] Dokumentacja ≈õrodowisk testowych

### Faza 2: Testy Jednostkowe (Tydzie≈Ñ 2-3)
- [ ] Serwisy: openrouter.service, flashcards.service, generations.service
- [ ] Custom hooks: useGenerateFlashcards, useSaveFlashcards
- [ ] UI components: Button, Input, Card, Dialog, Alert
- [ ] Utility functions: validation, hashing
- [ ] **Coverage target:** > 80% dla /src/lib, /src/components/hooks

### Faza 3: Testy Integracyjne (Tydzie≈Ñ 3-4)
- [ ] API endpoints: auth, generations, flashcards
- [ ] Middleware + protected routes
- [ ] OpenRouter service + generations flow
- [ ] Database operations (CRUD, RLS)
- [ ] **Coverage target:** > 70% dla /src/pages/api

### Faza 4: Testy E2E (Tydzie≈Ñ 4-5)
- [ ] User stories: US-001 do US-009
- [ ] Critical paths: register ‚Üí login ‚Üí generate ‚Üí save ‚Üí logout
- [ ] Error handling flows
- [ ] Cross-browser testing (Chrome, Firefox, Safari)
- [ ] **Test suites:** Minimum 15 scenarios

### Faza 5: Testy Specjalistyczne (Tydzie≈Ñ 5-6)
- [ ] Security testing: RLS, JWT, XSS, SQL injection
- [ ] Performance testing: Lighthouse, Artillery load tests
- [ ] Accessibility audit: axe DevTools, WCAG 2.1 AA
- [ ] Compatibility testing: browsers, devices
- [ ] RODO compliance verification

### Faza 6: Regression i UAT (Tydzie≈Ñ 7)
- [ ] Regression test suite (automated)
- [ ] UAT z rzeczywistymi u≈ºytkownikami (5-10 os√≥b)
- [ ] Bug fixing i retesting
- [ ] Final smoke tests na staging

### Faza 7: Deployment i Monitoring (Tydzie≈Ñ 8)
- [ ] Production deployment
- [ ] Smoke tests na produkcji
- [ ] Monitoring setup (Sentry, LogTail)
- [ ] Post-deployment verification

---

## 8. Kryteria Akceptacji Test√≥w

### 8.1 Kryteria funkcjonalne
- ‚úÖ Wszystkie testy krytyczne (priorytet: Krytyczny) przesz≈Çy pomy≈õlnie
- ‚úÖ Min. 95% test√≥w wysokiego priorytetu przesz≈Ço
- ‚úÖ Min. 90% test√≥w ≈õredniego priorytetu przesz≈Ço
- ‚úÖ Zero krytycznych bug√≥w (Severity: Critical)
- ‚úÖ Max 5 bug√≥w wysokiej wagi (Severity: High) - z planem naprawy

### 8.2 Kryteria pokrycia kodu
- ‚úÖ Unit tests: > 80% coverage dla /src/lib
- ‚úÖ Integration tests: > 70% coverage dla /src/pages/api
- ‚úÖ E2E tests: Pokrycie wszystkich user stories (US-001 do US-009)

### 8.3 Kryteria wydajno≈õciowe
- ‚úÖ API endpoints (bez AI): < 200ms (p95)
- ‚úÖ POST /api/generations: < 10s (p95)
- ‚úÖ Lighthouse Performance Score: > 90
- ‚úÖ Lighthouse Accessibility Score: > 90
- ‚úÖ First Contentful Paint: < 1.5s
- ‚úÖ Time to Interactive: < 3.5s
- ‚úÖ Load test: 10 concurrent users bez b≈Çƒôd√≥w

### 8.4 Kryteria bezpiecze≈Ñstwa
- ‚úÖ RLS policies dzia≈ÇajƒÖ poprawnie (100% skuteczno≈õƒá)
- ‚úÖ JWT validation na wszystkich protected endpoints
- ‚úÖ Brak podatno≈õci XSS, SQL injection (OWASP Top 10)
- ‚úÖ Kaskadowe usuniƒôcie danych u≈ºytkownika (RODO)
- ‚úÖ Sensitive data (has≈Ça, tokeny) nie logowane

### 8.5 Kryteria dostƒôpno≈õci
- ‚úÖ WCAG 2.1 Level AA compliance (axe DevTools: 0 violations)
- ‚úÖ Nawigacja klawiaturƒÖ dzia≈Ça na wszystkich stronach
- ‚úÖ Screen reader compatibility (NVDA/JAWS)
- ‚úÖ Kontrast kolor√≥w > 4.5:1

### 8.6 Kryteria kompatybilno≈õci
- ‚úÖ Dzia≈Ça w Chrome 110+, Firefox 110+, Safari 16+, Edge 110+
- ‚úÖ Responsywno≈õƒá: desktop (1920x1080), tablet (1024x768), mobile (390x844)
- ‚úÖ Zero layout shift na wszystkich rozdzielczo≈õciach

---

## 9. Role i Odpowiedzialno≈õci

### 9.1 QA Lead
**Odpowiedzialno≈õci:**
- Planowanie i koordynacja test√≥w
- Definiowanie strategii testowej
- Review test cases
- Raportowanie postƒôp√≥w do stakeholders
- Final sign-off dla release

### 9.2 QA Engineer (Automation)
**Odpowiedzialno≈õci:**
- Implementacja unit tests (Vitest)
- Implementacja E2E tests (Playwright)
- Setup CI/CD pipeline
- Maintenance test suites
- Code reviews test code

### 9.3 QA Engineer (Manual)
**Odpowiedzialno≈õci:**
- Exploratory testing
- Manual API testing (PowerShell scripts, Postman)
- UAT facilitation
- Bug reporting i retesting
- Accessibility testing (manual checks)

### 9.4 Developer (Backend)
**Odpowiedzialno≈õci:**
- Code review dla test√≥w integracyjnych
- Support dla test setup (fixtures, mocks)
- Fixing bugs High/Critical priority
- Writing unit tests dla nowych serwis√≥w

### 9.5 Developer (Frontend)
**Odpowiedzialno≈õci:**
- Unit tests dla React components
- Custom hooks testing
- Fixing UI bugs
- Accessibility implementation (ARIA labels)

### 9.6 DevOps Engineer
**Odpowiedzialno≈õci:**
- Setup ≈õrodowisk testowych (staging)
- CI/CD pipeline maintenance
- Monitoring setup (Sentry, LogTail)
- Performance testing infrastructure (Artillery)

---

## 10. Procedury Raportowania B≈Çƒôd√≥w

### 10.1 Klasyfikacja b≈Çƒôd√≥w

**Severity (Waga b≈Çƒôdu):**
- **Critical:** Aplikacja nie dzia≈Ça, brak workaround (np. nie mo≈ºna zalogowaƒá)
- **High:** G≈Ç√≥wna funkcjonalno≈õƒá nie dzia≈Ça, workaround trudny (np. generowanie fiszek failuje zawsze)
- **Medium:** Funkcjonalno≈õƒá dzia≈Ça nieprawid≈Çowo, workaround istnieje (np. edycja fiszki nie zapisuje ≈∫r√≥d≈Ça)
- **Low:** Problemy kosmetyczne, UX (np. z≈Çy kontrast przycisku)

**Priority (Priorytet naprawy):**
- **P0 (Blocker):** Natychmiastowa naprawa, blokuje release
- **P1 (High):** Naprawa przed release
- **P2 (Medium):** Naprawa w nastƒôpnym sprint
- **P3 (Low):** Naprawa gdy czas pozwoli

### 10.2 Format raportu b≈Çƒôdu

**Szablon (GitHub Issue):**
```markdown
## üêõ Bug Report

**ID:** BUG-{YYYYMMDD}-{NR}
**Severity:** Critical / High / Medium / Low
**Priority:** P0 / P1 / P2 / P3
**Environment:** Local / Staging / Production
**Browser:** Chrome 120 / Firefox 121 / Safari 17
**Device:** Desktop / Tablet / Mobile

### üìù Description
Kr√≥tki opis problemu (1-2 zdania)

### üìç Steps to Reproduce
1. Otw√≥rz /auth/login
2. Wprowad≈∫ email: test@example.com
3. Kliknij "Zaloguj siƒô"

### ‚úÖ Expected Behavior
U≈ºytkownik zostaje zalogowany i przekierowany do /generate

### ‚ùå Actual Behavior
HTTP 500 Internal Server Error, komunikat: "Supabase connection failed"

### üì∏ Screenshots / Logs
[Attach screenshots, console logs, network tab]

### üîç Additional Context
- Wystƒôpuje tylko w przeglƒÖdarce Safari
- Dzia≈Ça poprawnie w Chrome i Firefox
- Supabase URL w .env: http://localhost:54321

### üõ†Ô∏è Possible Fix
Suspected issue: CORS configuration for Safari
```

### 10.3 Workflow raportowania

1. **Discovery:** QA/Developer odkrywa bug
2. **Report:** Utworzenie GitHub Issue z szablonem
3. **Triage:** QA Lead przypisuje Severity i Priority
4. **Assignment:** Bug przypisany do Developer
5. **Fix:** Developer naprawia i tworzy PR
6. **Retest:** QA weryfikuje fix na staging
7. **Close:** QA zamyka issue po weryfikacji

### 10.4 Bug tracking board (GitHub Projects)

**Kolumny:**
- **Backlog:** Nowe bugi, nie ocenione
- **To Do:** Ocenione, gotowe do naprawy
- **In Progress:** Developer pracuje nad fix
- **Ready for Test:** Fix wdro≈ºony na staging, czeka na retest
- **Done:** Zweryfikowane przez QA, zamkniƒôte

**Filters:**
- Critical bugs (Severity: Critical)
- Blocker bugs (Priority: P0)
- Pre-release bugs (must fix before launch)

---

## 11. Wska≈∫niki i Metryki

### 11.1 Metryki testowania
- **Test Execution Rate:** (Tests executed / Total tests) √ó 100
- **Pass Rate:** (Tests passed / Tests executed) √ó 100
- **Defect Density:** Bugs found / KLOC (1000 lines of code)
- **Code Coverage:** Branches covered / Total branches
- **Automation Rate:** (Automated tests / Total tests) √ó 100

### 11.2 Metryki jako≈õci
- **Defect Leakage:** Bugs found in production / Total bugs
- **Mean Time to Detect (MTTD):** Avg time from bug introduction to detection
- **Mean Time to Resolve (MTTR):** Avg time from bug report to fix deployed
- **Escaped Defects:** Critical bugs found post-release

### 11.3 Cele (Targets)
- Pass Rate: > 95%
- Code Coverage: > 80% (unit), > 70% (integration)
- Automation Rate: > 70%
- Defect Leakage: < 5%
- MTTR (Critical): < 4 hours
- MTTR (High): < 24 hours

---

## 12. ZarzƒÖdzanie Ryzykiem

### 12.1 Zidentyfikowane ryzyka

**RISK-001: OpenRouter API Unavailable**
- **Prawdopodobie≈Ñstwo:** ≈örednie
- **Wp≈Çyw:** Krytyczny (core feature)
- **Mitigation:** Implementacja circuit breaker, fallback na inny model/providera, user-friendly error messages
- **Contingency:** Manual flashcard creation jako workaround

**RISK-002: Supabase Auth Rate Limiting**
- **Prawdopodobie≈Ñstwo:** Niskie
- **Wp≈Çyw:** Wysoki
- **Mitigation:** Implementacja local rate limiting, exponential backoff, caching session tokens
- **Contingency:** Upgrade Supabase plan

**RISK-003: RLS Policy Bypass**
- **Prawdopodobie≈Ñstwo:** Bardzo niskie
- **Wp≈Çyw:** Krytyczny (data leak)
- **Mitigation:** Comprehensive RLS testing, penetration testing, code review security-critical paths
- **Contingency:** Incident response plan, RODO breach notification

**RISK-004: Insufficient Test Coverage**
- **Prawdopodobie≈Ñstwo:** ≈örednie
- **Wp≈Çyw:** Wysoki (bugs in production)
- **Mitigation:** Enforce coverage thresholds w CI/CD, mandatory code reviews, TDD practices
- **Contingency:** Post-launch bug fixing sprint

**RISK-005: Performance Degradation**
- **Prawdopodobie≈Ñstwo:** ≈örednie
- **Wp≈Çyw:** ≈öredni (poor UX)
- **Mitigation:** Load testing przed release, database indexing, CDN dla assets, monitoring
- **Contingency:** Vertical scaling (DigitalOcean), query optimization

### 12.2 Plan awaryjny (Contingency)
- **Rollback plan:** Git revert, redeploy previous version
- **Hotfix process:** Fast-track PR review, deploy poza normalnym cyklem
- **Communication plan:** Statuspage.io dla user notifications, Discord/Slack dla internal comms

---

## 13. Za≈ÇƒÖczniki

### 13.1 Linki do dokumentacji
- PRD: `.ai/prd.md`
- Auth Spec: `.ai/auth-spec.md`
- API Plan: `.ai/api-plan.md`
- OpenRouter Service: `.ai/openrouter-service-implementation-plan.md`
- Test Scripts: `.ai/tests/`

### 13.2 Test fixtures
- **Location:** `.ai/tests/fixtures/`
- **seed-users.sql:** Testowi u≈ºytkownicy (test@10xcards.com)
- **seed-flashcards.sql:** Sample flashcards dla manual testing
- **mock-openrouter.json:** Mock responses dla unit tests

### 13.3 CI/CD Configuration
- **Location:** `.github/workflows/test.yml`
- **Triggers:** Push do main, PR
- **Jobs:** lint, unit-test, integration-test, e2e-test (on staging)
- **Coverage report:** Codecov integration

---

## Wersjonowanie

**Wersja:** 1.0  
**Data:** 2025-10-31  
**Autor:** QA Team  
**Zatwierdzi≈Ç:** Tech Lead  

**Historia zmian:**
- 1.0 (2025-10-31): Pierwsza wersja planu test√≥w
